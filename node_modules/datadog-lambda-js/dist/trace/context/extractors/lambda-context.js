"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LambdaContextTraceExtractor = void 0;
var utils_1 = require("../../../utils");
var LambdaContextTraceExtractor = /** @class */ (function () {
    function LambdaContextTraceExtractor(tracerWrapper) {
        this.tracerWrapper = tracerWrapper;
    }
    LambdaContextTraceExtractor.prototype.extract = function (context) {
        var _a;
        if (!context || typeof context !== "object")
            return null;
        var custom = (_a = context.clientContext) === null || _a === void 0 ? void 0 : _a.custom;
        if (!custom || typeof custom !== "object")
            return null;
        // TODO: Note of things to deprecate in next release, headers being just
        // custom field, instead of custom._datadog
        var headers = custom;
        if (headers._datadog !== undefined) {
            headers = headers._datadog;
        }
        var spanContext = this.tracerWrapper.extract(headers);
        if (spanContext === null)
            return null;
        (0, utils_1.logDebug)("Extracted trace context from Lambda Context event", { spanContext: spanContext, headers: headers });
        return spanContext;
    };
    return LambdaContextTraceExtractor;
}());
exports.LambdaContextTraceExtractor = LambdaContextTraceExtractor;
//# sourceMappingURL=lambda-context.js.map